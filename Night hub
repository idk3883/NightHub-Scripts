--// NightHub Premium
--// Made for sandbox fun

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UIS = game:GetService("UserInputService")

local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()

-- Update character refs on respawn
local function getCharacter()
	character = player.Character or player.CharacterAdded:Wait()
	return character:WaitForChild("Humanoid"), character:WaitForChild("HumanoidRootPart")
end

local humanoid, root = getCharacter()

player.CharacterAdded:Connect(function()
	task.wait(1)
	humanoid, root = getCharacter()
end)

-- GUI
local gui = Instance.new("ScreenGui")
gui.Name = "NightHub"
gui.ResetOnSpawn = false
gui.Parent = player:WaitForChild("PlayerGui")

local main = Instance.new("Frame")
main.Size = UDim2.new(0, 450, 0, 520)
main.Position = UDim2.new(0.5, -225, 0.5, -260)
main.BackgroundColor3 = Color3.fromRGB(10,10,10)
main.Visible = true
main.Parent = gui

Instance.new("UICorner", main).CornerRadius = UDim.new(0,18)

local stroke = Instance.new("UIStroke", main)
stroke.Color = Color3.fromRGB(255,255,255)
stroke.Thickness = 1.5

-- Draggable
main.Active = true
main.Draggable = true

-- Title
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1,0,0,50)
title.BackgroundTransparency = 1
title.Text = "NightHub"
title.TextColor3 = Color3.fromRGB(255,255,255)
title.Font = Enum.Font.GothamBold
title.TextSize = 26
title.Parent = main

-- Toggle Animation
local open = true
local function toggleHub()
	open = not open
	
	local goal = {}
	if open then
		main.Visible = true
		goal.Size = UDim2.new(0,450,0,520)
	else
		goal.Size = UDim2.new(0,450,0,0)
	end
	
	local tween = TweenService:Create(main, TweenInfo.new(0.35, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), goal)
	tween:Play()
	
	if not open then
		tween.Completed:Wait()
		main.Visible = false
	end
end

UIS.InputBegan:Connect(function(input,gp)
	if gp then return end
	if input.KeyCode == Enum.KeyCode.RightShift then
		toggleHub()
	end
end)

-- Section Builder
local function createSection(name, posY, height)
	local frame = Instance.new("Frame")
	frame.Size = UDim2.new(0.92,0,0,height)
	frame.Position = UDim2.new(0.04,0,0,posY)
	frame.BackgroundColor3 = Color3.fromRGB(15,15,15)
	frame.Parent = main
	
	Instance.new("UICorner", frame).CornerRadius = UDim.new(0,14)
	
	local sStroke = Instance.new("UIStroke", frame)
	sStroke.Color = Color3.fromRGB(255,255,255)
	sStroke.Thickness = 1
	
	local label = Instance.new("TextLabel")
	label.Size = UDim2.new(1,0,0,30)
	label.BackgroundTransparency = 1
	label.Text = name
	label.TextColor3 = Color3.fromRGB(255,255,255)
	label.Font = Enum.Font.GothamSemibold
	label.TextSize = 18
	label.Parent = frame
	
	return frame
end

local function createButton(parent, text, posY, callback)
	local btn = Instance.new("TextButton")
	btn.Size = UDim2.new(0.9,0,0,36)
	btn.Position = UDim2.new(0.05,0,0,posY)
	btn.Text = text
	btn.BackgroundColor3 = Color3.fromRGB(20,20,20)
	btn.TextColor3 = Color3.fromRGB(255,255,255)
	btn.Font = Enum.Font.Gotham
	btn.TextSize = 14
	btn.Parent = parent
	
	Instance.new("UICorner", btn).CornerRadius = UDim.new(0,10)
	
	local bStroke = Instance.new("UIStroke", btn)
	bStroke.Color = Color3.fromRGB(255,255,255)
	bStroke.Thickness = 1
	
	btn.MouseButton1Click:Connect(callback)
end

-- =========================
-- MOVEMENT üí®
-- =========================

local movement = createSection("Movement üí®",60,200)

local speedBox = Instance.new("TextBox")
speedBox.Size = UDim2.new(0.6,0,0,32)
speedBox.Position = UDim2.new(0.05,0,0,40)
speedBox.PlaceholderText = "Enter Speed"
speedBox.BackgroundColor3 = Color3.fromRGB(20,20,20)
speedBox.TextColor3 = Color3.fromRGB(255,255,255)
speedBox.Font = Enum.Font.Gotham
speedBox.TextSize = 14
speedBox.Parent = movement

Instance.new("UICorner", speedBox).CornerRadius = UDim.new(0,10)
Instance.new("UIStroke", speedBox).Color = Color3.fromRGB(255,255,255)

createButton(movement,"Set Speed",80,function()
	local speed = tonumber(speedBox.Text)
	if speed then humanoid.WalkSpeed = speed end
end)

local infiniteJump = false
createButton(movement,"Toggle Infinite Jump",120,function()
	infiniteJump = not infiniteJump
end)

UIS.JumpRequest:Connect(function()
	if infiniteJump then
		humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
	end
end)

local savedPos
createButton(movement,"Set Position",160,function()
	savedPos = root.CFrame
end)

createButton(movement,"Teleport Back",200,function()
	if savedPos then
		root.CFrame = savedPos
	end
end)

-- =========================
-- ESP üëÅÔ∏è
-- =========================

local espSection = createSection("ESP üëÅÔ∏è",270,120)
local espEnabled = false

local function updateESP(state)
	for _,plr in pairs(Players:GetPlayers()) do
		if plr ~= player and plr.Character then
			local char = plr.Character
			if state then
				if not char:FindFirstChild("NightESP") then
					local h = Instance.new("Highlight")
					h.Name = "NightESP"
					h.FillTransparency = 1
					h.OutlineColor = Color3.fromRGB(255,255,255)
					h.Parent = char
				end
			else
				if char:FindFirstChild("NightESP") then
					char.NightESP:Destroy()
				end
			end
		end
	end
end

createButton(espSection,"Toggle ESP",50,function()
	espEnabled = not espEnabled
	updateESP(espEnabled)
end)

-- =========================
-- UTILITIES ‚öíÔ∏è
-- =========================

local utilities = createSection("Utilities ‚öíÔ∏è",410,90)

createButton(utilities,"Reset Character",40,function()
	character:BreakJoints()
end)

createButton(utilities,"Leave Game",75,function()
	game:Shutdown()
end)
